- name: theiacov_clearlabs_cromwell
  command: cromwell run -i ./tests/inputs/wf_theiacov_clearlabs.json -m metadata.json ./workflows/wf_theiacov_clearlabs.wdl
  tags:
    - wf_theiacov_clearlabs
    - wf_theiacov_clearlabs_cromwell
  files:
    - path: log.err
      contains: ["Successfully released change log lock", "INFO", "WORKFLOW_METADATA_SUMMARY_ENTRY", "liquibase"]
    - path: log.out
      contains: ["workflow finished with status 'Succeeded'", "theiacov_clearlabs", "Done"]
    - path: metadata.json
      contains: ["outputs", "theiacov_clearlabs", "Succeeded"]

- name: theiacov_clearlabs_miniwdl
  command: miniwdl run -i ./tests/inputs/wf_theiacov_clearlabs.json -d miniwdl_run/. --verbose --error-json ./workflows/wf_theiacov_clearlabs.wdl
  tags:
    - wf_theiacov_clearlabs
    - wf_theiacov_clearlabs_miniwdl
  files:
    - path: miniwdl_run/inputs.json
      contains: ["theiacov_clearlabs", "samplename", "primer_bed"]
    - path: miniwdl_run/outputs.json
      contains: ["theiacov_clearlabs"]
    - path: miniwdl_run/workflow.log
      contains: ["wdl", "theiacov_clearlabs", "NOTICE", "done"]
