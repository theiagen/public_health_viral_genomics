- name: theiacov_illumina_pe_cromwell
  command: cromwell run -i ./tests/inputs/wf_theiacov_illumina_pe.json -m metadata.json ./workflows/wf_theiacov_illumina_pe.wdl
  tags:
    - wf_theiacov_illumina_pe
    - wf_theiacov_illumina_pe_cromwell
  files:
    - path: log.err
      contains: ["Successfully released change log lock", "INFO", "WORKFLOW_METADATA_SUMMARY_ENTRY", "liquibase"]
    - path: log.out
      contains: ["workflow finished with status 'Succeeded'", "theiacov_illumina_pe", "Done"]
    - path: metadata.json
      contains: ["outputs", "theiacov_illumina_pe", "Succeeded"]

- name: theiacov_illumina_pe_miniwdl
  command: miniwdl run -i ./tests/inputs/wf_theiacov_illumina_pe.json -d miniwdl_run/. --verbose --error-json ./workflows/wf_theiacov_illumina_pe.wdl
  tags:
    - wf_theiacov_illumina_pe
    - wf_theiacov_illumina_pe_miniwdl
  files:
    - path: miniwdl_run/inputs.json
      contains: ["theiacov_illumina_pe", "samplename", "primer_bed"]
    - path: miniwdl_run/outputs.json
      contains: ["theiacov_illumina_pe"]
    - path: miniwdl_run/workflow.log
      contains: ["wdl", "theiacov_illumina_pe", "NOTICE", "done"]
