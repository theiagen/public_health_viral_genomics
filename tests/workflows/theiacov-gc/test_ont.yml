- name: theiacov_ont_cromwell
  command: cromwell run -i ./tests/inputs/wf_theiacov_ont.json -m metadata.json ./workflows/wf_theiacov_ont.wdl
  tags:
    - wf_theiacov_ont
    - wf_theiacov_ont_cromwell
  files:
    - path: log.err
      contains: ["Successfully released change log lock", "INFO", "WORKFLOW_METADATA_SUMMARY_ENTRY", "liquibase"]
    - path: log.out
      contains: ["workflow finished with status 'Succeeded'", "theiacov_ont", "Done"]
    - path: metadata.json
      contains: ["outputs", "theiacov_ont", "Succeeded"]

- name: theiacov_ont_miniwdl
  command: miniwdl run -i ./tests/inputs/wf_theiacov_ont.json -d miniwdl_run/. --verbose --error-json ./workflows/wf_theiacov_ont.wdl
  tags:
    - wf_theiacov_ont
    - wf_theiacov_ont_miniwdl
  files:
    - path: miniwdl_run/inputs.json
      contains: ["theiacov_ont", "samplename", "primer_bed"]
    - path: miniwdl_run/outputs.json
      contains: ["theiacov_ont"]
    - path: miniwdl_run/workflow.log
      contains: ["wdl", "theiacov_ont", "NOTICE", "done"]
